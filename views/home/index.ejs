<div id="home">
	<div class="home-content-top" ng-controller="homeCtrl">
		<div class="map-container">
			<%- partial('../global/jumbotron') -%>
			<leaflet center='mapCenter' ng-class='mapClass' class='map' layers="layers" markers='markers' defaults='options' event-broadcast="events" ></leaflet>
			<div class="aside" ng-show="toggleSidebar">
				<a href="#" ng-click="toggleSidebar = !toggleSidebar" class="arrow-button"></a>
				<perfect-scrollbar class="scroller" wheel-propagation="true" wheel-speed="50" refresh-on-change="someArray">
					<div class="aside-inner-content">
						<h3>Estos son los viajes en: {{mapPlace}}</h3>
						<ul>
                            <li ng-repeat="item in items">
                                <p>Fecha del viaje: <a href="{{'/viaje?id=' + item.id}}">{{item.fecha_inicio_com | date}}</a></p>
                                <p>Funcionario: <a href="{{'/funcionario?id=' + item.funcionario.id}}">{{item.funcionario.nombre_completo}}</a></p>
                            </li>

						</ul>
                    </div>
			    </perfect-scrollbar>
			</div>	
		</div>	
		<div class="total-money">
			<h1><span count-to="{{totalGastado}}" value="{{gasto_parcial}}" duration="2" filter="currency"></span></h1>
			<p>Presupuesto gastado hasta el 2014 en viajes de servidores públicos</p>
		</div>
	</div>
	<div class="centered-content">
		<div class="container-fluid" ng-controller="statisticsCTL">
			<div class="row top-people">
				<h2>Los 3 servidores públicos <br/> <span class="big">con mas gastos de viajes</span></h2>
				<div class="col-sm-4 person" ng-repeat="funcionario in funcionariosList | limitTo:3">
					<div class="person-content">
						<img src="/images/funcionario-default.png" alt="" class="picture">
						<p class="name">{{funcionario.nombre_completo}}</p>
						<p class="charge">{{funcionario.nombre_puesto != 0 ? funcionario.nombre_puesto : "No disponible"}}</p>
                        <p class="dependency"><strong>ifai</strong></p>
						<p class="money" count-to="{{funcionario.gasto_total}}" value="{{gasto_parcial}}" duration="2" filter="currency"></p>
						<p class="gray">Gastos al mes</p>
						<a href="/funcionario?id={{funcionario.funcionario}}" class="custom-button">Ver perfil</a>
					</div>
				</div>
				<div class="clear"></div>
			</div>
			<div class="row ranks">
				<div class="col-md-6 top-places top-hotels">
					<div class="inner-content">
						<h4><strong>Hoteles más visitados</strong><br/>por los servidores públicos</h4>
						<ul>
							<li ng-repeat="hotel in hotelList">
								<a><img src="/images/hotel_icon.png" alt="" class="picture" /></a>
								<p class="place"><a href="#">{{hotel.hotel}}</a></p>
								<p class="location"><a href="#">{{hotel.ciudad_destino}}, {{hotel.pais_destino}}</a></p>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-md-6 percentage-rank">
					<div class="inner-content">
						<h4><strong>Viajes nacionales e internacionales</strong><br/>de los servidores públicos</h4>
						<div class="charts-container">
							<div id="radial-one" class="radial-chart"></div>
							<div id="radial-two" class="radial-chart"></div>
							<div class="clear"></div>
						</div>
						<div class="clear"></div>
						<p class="total">Total de viajes al año: {{totalViajes}}</p>
					</div>
				</div>
			</div>
			<div class="row ranks">
				<div class="col-md-6 percentage-rank">
                    <carousel interval="5000">
                        <slide  active="slide.active" >
                            <div class="inner-content">
                                <div class="progress" ng-repeat="aerolinea in aerolineasList">
                                    <div class="progress-bar progress-bar-success" role="progressbar"
                                         aria-valuenow="{{(aerolinea.total / totalAerolineasVuelos) * 100}}" aria-valuemin="0" aria-valuemax="100"
                                         ng-style="{ 'width': calculateWidth(aerolinea) }">
                                        <span>{{aerolinea.linea_origen}}</span>
                                    </div>
                                </div>
                            </div>
                        </slide>
                        <slide active="" >
                            <div class="inner-content">
                                <h4><strong>Viajes por tipo</strong><br/>de los servidores públicos</h4>
                                <div class="charts-container">
                                    <div id="radial-three" class="radial-chart"></div>
                                    <div id="radial-four" class="radial-chart"></div>
                                    <div class="clear"></div>
                                </div>
                                <div class="clear"></div>
                                <p class="total">Total de viajes al año: {{totalViajes}}</p>
                            </div>
                        </slide>
                    </carousel>
                </div>
				<div class="col-md-6 top-places">
					<carousel interval="5000">
						<slide  active="slide.active" >
							<div class="inner-content">
								<h4><strong>Ciudades Internacionales</strong><br/>mas visitadas por los servidores públicos</h4>
								<ul>
									<li ng-repeat="ciudad in ciudadesList | filter:{tipo_viaje:'Internacional'} | limitTo:3">
										<a href="#"><img src="/images/pinlugar.png" alt="" class="picture" /></a>
										<p class="place"><a href="#">{{ciudad.ciudad_destino}}</a></p>
										<p class="location"><a href="#">{{ciudad.pais_destino}}</a></p>
									</li>
								</ul>
							</div>
						</slide>
						<slide active="" >
							<div class="inner-content">
								<h4><strong>Ciudades Nacionales</strong><br/>mas visitadas por los servidores públicos</h4>
								<ul>
                                    <li ng-repeat="ciudad in ciudadesList |filter:{pais_destino:'Mexico'} | limitTo:3">
										<a href="#"><img src="/images/pinlugar.png" alt="" class="picture" /></a>
                                        <p class="place"><a href="#">{{ciudad.ciudad_destino}}</a></p>
                                        <p class="location"><a href="#">{{ciudad.pais_destino}}</a></p>
									</li>
								</ul>
							</div>
						</slide>
					</carousel>
				</div>
			</div>			
		</div>
	</div>
</div>

